<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>TV 정보 화면</title>
<style>
  body {
    font-family: Arial, sans-serif;
    margin: 0;
    padding: 0;
    background-color: #f0f0f0;
    color: #333;
    background-image: url('image/image01.jpg');
    background-size: cover;
  }
  .header {
    position: absolute;
    padding: 20px;
    background-color: rgba(0, 0, 0, 0.1);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    box-shadow: 0 0 4px 4px rgba(0, 0, 0, 0.1);
    color: white
  }
  .content {
    position: absolute;
    top: 20vh;
    left: 50%;
    transform: translate(-50%, 0%);
    width: 500px;
    height: 60vh;
    padding: 20px;
    background-color: rgba(0, 0, 0, 0.1);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    box-shadow: 0 0 4px 4px rgba(0, 0, 0, 0.1);
    color: white
  }
  .info {
    margin-bottom: 20px;
  }
  .info h2 {
    margin-top: 0;
  }
  .info p {
    margin: 5px 0;
  }
  #calinderlist{
    margin-top: 15px;
    font-size: 20px;
  }
  .calinderelement{
    margin-bottom: 5px;
  }

  #indicator {
        text-align: center;
    }

    .dot {
        display: inline-block;
        width: 10px;
        height: 10px;
        border-radius: 50%;
        background-color: #ccc;
        margin: 0 5px;
    }

    .active {
        background-color: #000;
    }

    .active {
        background-color: #FFF;
    }
</style>
<link href="css/weather-icons.min.css" rel="stylesheet" >
<link href="css/weather-icons.css" rel="stylesheet" >
</head>
<body>

<div class="header" style="top: 20vh; left: 5vh; width: 20%; height: 30%; text-align: center;">
    <div id="date" style="color: white; font-size: 30px;"></div>
    <div>
        <span id="time" style="color: white; font-size: 50px;"></span>
        <span id="sec" style="color: white; font-size: 30px; "></span>
    </div>
    <div id="calinderlist">
        <div class="calinderelement">
            <span class="D-Day">D-3</span>
            <span class="calinderText">경남과학발명 서류제출</span>
        </div>
        <div class="calinderelement">
            <span class="D-Day">D-27</span>
            <span class="calinderText">1차고사</span>
        </div>
    </div>
</div>

<div class="header" style="top: 20vh; right: 5vh; width: 20%; height: 30%; text-align: center;">
  <div id="weather" style="color: white; font-size: 30px;"></div>
</div>

<div class="content">
    <div id="content">

    </div>
    <div id="indicator"></div>

</div>

<script>
  // 시간 업데이트
  function updateTime() {
    var now = new Date();
    var timeDiv = document.getElementById('time');
    daymap = ['일', '월', '화', '수', '목', '금', '토']
    timeDiv.innerHTML = now.getHours().toString().padStart(2,'0') + ":" + now.getMinutes().toString().padStart(2,'0');
    var secDiv = document.getElementById('sec');
    secDiv.innerHTML = now.getSeconds().toString().padStart(2,'0');
    var dateDiv = document.getElementById('date');
    dateDiv.innerHTML = now.toLocaleDateString('ko-KR') + ' ' + daymap[now.getDay()];
  }


  // 페이지 로드 시 초기화 및 주기적 업데이트
  function initialize() {
    updateTime();
    setInterval(updateTime, 1000); // 1초마다 시간 업데이트
  }

  initialize();
</script>

<!--날씨정보 표시 스크립트-->
<script>
    // OpenWeatherMap API 키
    const apiKey = '9f69513a8f6d3b902b620ed1343f24f1'; // 여기에 자신의 API 키를 입력하세요
  
    // 날씨 정보를 가져오는 함수
    function fetchWeather() {
      // 진주의 날씨를 가져오도록 설정
      const city = 'Jinju';
      const apiUrl = `https://api.openweathermap.org/data/2.5/weather?q=${city}&appid=${apiKey}&units=metric`;
  
      // API 요청 보내기
      fetch(apiUrl)
        .then(response => {
          if (!response.ok) {
            throw new Error('날씨 정보를 가져오는 데 문제가 발생했습니다.');
          }
          return response.json();
        })
        .then(data => {
          // 날씨 정보를 처리하여 화면에 표시
          const weatherInfoDiv = document.getElementById('weather');
          const temperature = data.main.temp;
          const feels_like = data.main.feels_like;
          const description = data.weather[0].description;
          const iconName = data.weather[0].icon;
          const iconUrl = `http://openweathermap.org/img/wn/${iconName}.png`;
          console.log(data.weather[0].description)
          const cityName = data.name;
          console.log(data)
          const weatherInfo = `<img src="${iconUrl}" alt="날씨 아이콘"> ${temperature}°C<br> 체감 온도 ${feels_like}°C`;
          weatherInfoDiv.innerHTML = weatherInfo;
          
        })
        .catch(error => {
          console.error('날씨 정보 가져오기 에러:', error);
        });
    }
  
    // 페이지 로드 시 날씨 정보 가져오기
    window.onload = function() {
      fetchWeather();
      // 일정 주기마다 날씨 정보 업데이트
      setInterval(fetchWeather, 600000); // 10분마다 업데이트
    };

    // 5초 간격으로 내용을 변경하는 함수
    function rotateContent() {
        const contents = ['내용 1', '내용 2', '내용 3', '내용 4'];
        let currentIndex = 0;
        
        function showContent() {
            document.getElementById('content').innerHTML = contents[currentIndex];
            currentIndex = (currentIndex + 1) % contents.length;
        
            function updateIndicator(currentIndex) {
                const indicator = document.getElementById('indicator');
                indicator.innerHTML = ''; // 이전 점 제거

                for (let i = 0; i < contents.length; i++) {
                    const dot = document.createElement('span');
                        dot.classList.add('dot');
                    if (i == currentIndex) {
                        dot.classList.add('active');
                    }
                    indicator.appendChild(dot);
                }
            }

            updateIndicator(currentIndex)
        }
        
        showContent(); // 초기 내용 표시
        
        setInterval(showContent, 5000); // 5초마다 내용 변경
    }

    rotateContent();
  </script>

</body>
</html>
